import { normalize } from 'normalizr';
import { httpClient } from '../../plugins/axios';
import { API_URL } from '../../constants/index';

import { format{{pascalCase name }}s } from './format';
import { {{pascalCase name }}sSchema } from './entity';

import mock{{pascalCase name }}s from './__mocks__/{{pascalCase name }}.json';

import type { Resolver } from '../types';
import type { {{pascalCase name }}sEntity } from './types';

export const resolve{{pascalCase name }}s: Resolver<
  void,
  {{pascalCase name }}sEntity
> = async () => {
  try {
    // const raw = await httpClient.get(`${API_URL}/{{ name }}`);
    const raw = mock{{pascalCase name }}s;
    const formatted = format{{pascalCase name }}s(raw);
    const result = normalize(formatted, {{pascalCase name }}sSchema);

    return result;
  } catch (error) {
    console.log(error);
  }
};
